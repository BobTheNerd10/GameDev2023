<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<!--Site sheets-->
	<link rel="stylesheet" href="../printStyle.css">
	<script src="../common.js" defer></script>
</head>


<style>
    * {
        overflow:hidden;
    }
    
    body {
        background-repeat: repeat;
        background-size: 50%;
        background-image:url("space.jpg");
        background-position: 0px 0px;
    }

    scrollingElement {
        z-index:-1;
        position:absolute;
        margin: 0;
        margin-block: 0;
        white-space:nowrap;
    }

    stickyElement {
        z-index:100;
    }

    #playerUfo {
        position:absolute;
        transform-origin: center;
        top:50%;
        left:50%;
        transform: translate(-50%, -50%);
        width:200px;
        height:auto;
    }
</style>



<body>
    <scrollingElement x=0 y=0><h1 style="color: white;">T2A16-Move-Background-Curtis</h1></scrollingElement>
    <scrollingElement x=1000 y=1000><img src="dog.webp"></scrollingElement>
    
    <stickyElement><img id="playerUfo" src="ufo.png"></stickyElement>
</body>





<script>
    let globalXPosition = 0
    let globalXmin = -1000
    let globalXmax = 1000

    let globalYPosition = 0
    let globalYmin = -1000
    let globalYmax = 1000

    let globalXVelocity = 0
    let globalYVelocity = 0
    let globalFriction = 1.0008

    let upKeyDown = false
    let leftKeyDown = false
    let rightKeyDown = false
    let downKeyDown = false

    let globalRefreshClock

    let body = document.getElementsByTagName('body').item(0) // If there's multiple body elements, your webpage wont work, sorry :<

    let scrollingElements = document.getElementsByTagName('scrollingElement')

    function globalRefresh()
    {
        globalXPosition += globalXVelocity
        globalXPosition = globalXPosition.clamp(globalXmin, globalXmax)
        globalYPosition += globalYVelocity
        globalYPosition = globalYPosition.clamp(globalYmin, globalYmax)
        globalXVelocity /= globalFriction
        globalYVelocity /= globalFriction
        body.style.backgroundPosition = `${globalXPosition}px ${globalYPosition}px`

        // Add velocity with controls
        if(upKeyDown)    {globalYVelocity += 0.01}
        if(leftKeyDown)  {globalXVelocity += 0.01}
        if(downKeyDown)  {globalYVelocity -= 0.01}
        if(rightKeyDown) {globalXVelocity -= 0.01}

        console.log("X and Y", globalXPosition, globalYPosition)
        console.log("Xmin and max", globalXmin, globalXmax)
        console.log("Ymin and max", globalYmin, globalYmax)
        if(globalXPosition>=globalXmax){globalXVelocity = 0, globalXPosition -= 0.00001}
        if(globalXPosition<=globalXmin){globalXVelocity = 0, globalXPosition += 0.00001}
        if(globalYPosition>=globalYmax){globalYVelocity = 0, globalYPosition -= 0.00001}
        if(globalYPosition<=globalYmin){globalYVelocity = 0, globalYPosition += 0.00001}


        for(scrollingElement of scrollingElements)
        {
            elementsOriginX = Number(  scrollingElement.getAttribute('x')  )
            elementsOriginY = Number(  scrollingElement.getAttribute('y')  )

            scrollingElement.style.left = `${elementsOriginX + globalXPosition}px`
            scrollingElement.style.top =  `${elementsOriginY + globalYPosition}px`
        }
    }


    globalRefreshClock = setInterval(globalRefresh, 2)



    window.addEventListener("keydown", (event) => {
        if(event.key == 'w')
        {
            upKeyDown = true
        }
        if(event.key == 'a')
        {
            leftKeyDown = true
        }
        if(event.key == 's')
        {
            downKeyDown = true
        }
        if(event.key == 'd')
        {
            rightKeyDown = true
        }
    })

    window.addEventListener('keyup', (event) => {
        if(event.key == 'w')
        {
            upKeyDown = false
        }
        if(event.key == 'a')
        {
            leftKeyDown = false
        }
        if(event.key == 's')
        {
            downKeyDown = false
        }
        if(event.key == 'd')
        {
            rightKeyDown = false
        }
    })



    // Add a new function to all Number instances that lets you clamp them
    Number.prototype.clamp = 
        function(min, max) {
            return Math.min(Math.max(this, min), max);
        };
</script>







</html>