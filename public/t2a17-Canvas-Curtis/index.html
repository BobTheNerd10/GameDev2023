<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<!--Site sheets-->
	<link rel="stylesheet" href="../printStyle.css">
	<script src="../common.js" defer></script>
</head>
<body>
    <header>
        <!--Dummy tag, will be filled in with JS if needed-->
    </header>
    
    <main>
        <h1 style="margin-block-end:0">T2A17-Canvas-Curtis</h1>

        <hr>

        <section>
            Use these inputs to draw stuff on the canvas!<br><br>

           

            Preset scripts: <select id="scriptPresets"
                onchange="drawingCommandInput.value = this.value"
            >
                <option value=""></option>
                <option value="The 20 quick brown foxes jumped over the 34 lazy dogs 89 times.">Quick brown fox</option>
                <option value="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.">Lorem Ipsum</option>
                <option value="My secret password is WordPass12">Secret Password</option>
            </select>
            <textarea style="resize:vertical; width:725px; height:200px;" id="drawingCommandInput"></textarea>


            <button onclick="drawAllCommands()">Run ArtScript</button>
            <button onclick="canvasContext.clearRect(0, 0, drawingCanvas.width, drawingCanvas.height)">Clear canvas</button>

            <br>
            <br>
            <br>

            Output:
            <canvas id="drawingCanvas" width="725" height="600" style="border:1px solid #000000"></canvas>
            
            
            <script>
                let drawingCommandInput = document.getElementById('drawingCommandInput')
                let drawingCanvas = document.getElementById('drawingCanvas')
                let canvasContext = drawingCanvas.getContext('2d')

                function drawAllCommands()
                {

                    // split the input program into its individual lines
                    everyCommandLine = drawingCommandInput.value.split('\n') 


                    // then split each line into their individual arguments
                    everyCommandArray = [] 
                    for(let i = 0; i < everyCommandLine.length; i++)
                    {
                        everyCommandArray[i] = everyCommandLine[i].split(' ')
                    }
                    
                    // Then iterate through all the commands!
                    for(commandArray of everyCommandArray)
                    {   
                        // commandArray[0] is the command name
                        // everything in the array afterwards is arguments to the ArtScript command

                        try{
                            switch(commandArray[0]){

                                case "width":
                                    canvasContext.lineWidth = commandArray[1]
                                    break
                                
                                case "color":
                                case "colour":
                                    commandArray.shift()

                                    canvasContext.strokeStyle = commandArray.join(' ')
                                    break

                                case "line":
                                    lineStartX = commandArray[1]
                                    lineStartY = commandArray[2]
                                    lineEndX = commandArray[3]
                                    lineEndY = commandArray[4]
                                
                                    canvasContext.beginPath();
                                    canvasContext.moveTo(lineStartX,lineStartY)
                                    canvasContext.lineTo(lineEndX,lineEndY)
                                    canvasContext.stroke()
                                    break
                                    
                                case "square":
                                    squareX = commandArray[1]
                                    squareY = commandArray[2]
                                    squareWidth = commandArray[3]
                                    squareHeight = commandArray[4]
                                    
                                    canvasContext.beginPath()
                                    canvasContext.fillRect(squareX, squareY, squareWidth, squareHeight)
                                    canvasContext.stroke()
                                    break
                    
                        
                                default:
                                    if(commandArray[0] != '')
                                    {
                                        console.log(`Command ${commandArray[0]} is not defined!`)
                                    }
                                    break
                                }
                        }
                        catch (error){console.error(error)}
                    }
                }
            </script>
        </section>
    </main>
</body>
</html>