<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<!--Site sheets-->
	<link rel="stylesheet" href="../printStyle.css">
	<script src="../common.js" defer></script>
</head>
<body>
    <header>
        <!--Dummy tag, will be filled in with JS if needed-->
    </header>

    <main>
        <h1>T1A03-Forms-Curtis</h1>

        <hr>

        <br>
        <h2>Do you have more in common with A rock or THE rock?</h2>
        <img src="RockOrRock.png" style="height:auto; width:30vw;">
        <br>
        <br>
        <br>

        <hr>   

        <br>
        <br>

        <section>
            <form id="rockForm">
                <fieldset>
                    <legend>Personal Info: (Your info will not be saved, but will be used for results)</legend>

                    <label for="firstName">First name:</label>
                    <input id="firstName" name="firstName" type="text" required>

                    <br>
                    <br>
                    
                    <label for="age">Age:</label>
                    <input id="age" name="age" type="number" required>
                </fieldset>

                <br>
                <br>
                
                <fieldset>
                    <!--
                        the value is what it's worth
                    -->
                
                    <legend>Questionnaire:</legend>                
                    
                    <label for="saturdayActivity">Whats your favourite thing to do on a typical Saturday:</label>
                    <select id="saturdayActivity" name="saturdayActivity">
                        <option value="3">Sleep</option>
                        <option value="10">Weightlifting</option>
                        <option value="0">Sit around and do nothing</option>
                        <option value="10">Star in movies</option>
                        <option value="5">Other</option>
                    </select>

                    <br>
                    <br>

                    <label for="favouriteFood">What's your favourite kind of food?:</label>
                    <select id="favouriteFood" name="favouriteFood">
                        <option value="4">Water</option>
                        <option value="0">Sediment</option>
                        <option value="10">Seafood</option>
                        <option value="6">Red meat</option>
                        <option value="5">Other</option>
                    </select>

                    <br>
                    <br>

                    <!--
                    
                    <input type="checkbox">
                    
                    <br>
                    <br>

                    <input type="checkbox">
                    
                    <br>
                    <br>

                    -->

                    <label for="favouriteColour">Input your favourite colour:</label>
                    <input id='favouriteColour' name='favouriteColour' type="color">
                    
                    <br>
                    <br>             

                    <label for="movieAmount">How many movies have you starred in in the last year:</label>
                    <input id="movieAmount" name="movieAmount" type="number">    
                    
                    <br>
                    <br>     
                    
                    <!--

                    <input type="radio">
                    
                    <br>
                    <br>

                    
                    Rate movies out of 10:
                    <input type="range"  id="a" name="a" value="50"> // Rocky
                    <input type="range"  id="a" name="a" value="50"> // Moana
                    <input type="range"  id="a" name="a" value="50"> // 
                    <input type="range"  id="a" name="a" value="50">

                    -->
                    
                </fieldset>

                <br>
                <br>

                <input type="submit">  
                <input type="reset">  
            </form>
        </section>

        

        <div id="resultDiv" style="display:none;">
            
            <hr>

            <h3>Whoa! You're....</h3>
            <h1 id="resultText"></h1>
            <p id="resultSpecialTxt"></p>
        </div>
        
    </main>
    
    <br>
    <br>
    <br>
    <br>

    <script>
        let rockForm = document.getElementById("rockForm")
        let resultDiv = document.getElementById("resultDiv")
        let resultHeading = document.getElementById("resultText")
        let resultSpecialTxt = document.getElementById("resultSpecialTxt")

        rockForm.addEventListener("submit", handleSubmit)


        function handleSubmit(e) // I have no clue what e is, but thank you stack exchange :>
        {
            e.preventDefault();
            let formData = new FormData(e.target);
            formData = Object.fromEntries(formData);

            // Form data is now an object that contains all the user's answers


            let rockScore = 0
            let highestPossible = 0 // Each question is worth 10 
           
            let isDwayne = false

            // Iterate through a list of names that give the "is Dwayne" easter egg if the age is also 51 (real the rock's age)
            let dwayneNames = ['Dwayne', 'The Rock'] 
            dwayneNames.forEach(function (name)
            {
                if(formData.firstName.replace(/\s+/g, '').toLowerCase() == name.replace(/\s+/g, '').toLowerCase())
                {   
                    if(formData.age == 51)
                    {
                        isDwayne = true
                        rockScore += 10
                        highestPossible += 10
                    }
                }
            })

            delete formData.firstName
            delete formData.age


            // Account for questions that dont already have the numbers counted

            


            // Average all the answers
            for(let answer of Object.values(formData))
            {  
                rockScore += parseInt(answer)
                highestPossible += 10
            }
            console.log(rockScore, highestPossible)
            resultHeading.innerText = `${Math.round(rockScore/highestPossible * 100)}% like the rock and ${Math.round((100 - rockScore/highestPossible * 100))}% like a rock!`
            resultDiv.style.display = "block" // unhide the results!
            if(isDwayne)
            {
                resultSpecialTxt.innerText = "Wait... are you actually THE rock?\nLemme know if this score was accurate!"
            }
            
        }
    </script>
</body>
</html>